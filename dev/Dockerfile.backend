FROM python:3.12.7


ARG DJANGO_SETTINGS_MODULE
ARG DJANGO_SECRET_KEY
ARG REDIS_SETTINGS
ARG DATABASE_SETTINGS
ARG DIGITALOCEAN_SETTINGS
ARG AWS_ACCESS_KEY
ARG AWS_SECRET_ACCESS_KEY
ARG S3_BUCKET_NAME
ARG S3_BUCKET_URL
ARG REGION


ENV DJANGO_SETTINGS_MODULE=${DJANGO_SETTINGS_MODULE}
ENV DJANGO_SECRET_KEY=${DJANGO_SECRET_KEY}
ENV REDIS_SETTINGS=${REDIS_SETTINGS}
ENV DATABASE_SETTINGS=${DATABASE_SETTINGS}
ENV DIGITALOCEAN_SETTINGS=${DIGITALOCEAN_SETTINGS}
ENV AWS_ACCESS_KEY=${AWS_ACCESS_KEY}
ENV AWS_SECRET_ACCESS_KEY=${AWS_SECRET_ACCESS_KEY}
ENV S3_BUCKET_NAME=${S3_BUCKET_NAME}
ENV S3_BUCKET_URL=${S3_BUCKET_URL}
ENV REGION=${REGION}

WORKDIR /srv/api

COPY ../requirements.txt .

RUN pip install -r requirements.txt

COPY .. .
